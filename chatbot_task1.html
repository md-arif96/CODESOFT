<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Task 1: Rule-Based Chatbot</title>
    <!-- Load Tailwind CSS for modern styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Very light gray */
        }
        .chat-container {
            max-width: 600px;
            height: 90vh; 
            min-height: 500px;
            display: flex;
            flex-direction: column;
        }
        .message-area {
            flex-grow: 1;
            overflow-y: auto;
            padding: 1.5rem;
            background-color: #f9fafb; /* Off-white chat area */
            border-radius: 1rem 1rem 0 0;
            /* Hide scrollbar for aesthetics */
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .message-area::-webkit-scrollbar {
            display: none;
        }
        .user-message {
            margin-left: auto;
            background-color: #10b981; /* Emerald Green for user */
            color: white;
            border-radius: 1rem 0.5rem 0.5rem 1rem;
            max-width: 80%;
        }
        .bot-message {
            margin-right: auto;
            background-color: #d1fae5; /* Light mint green for bot */
            color: #065f46; /* Dark green text */
            border-radius: 0.5rem 1rem 1rem 0.5rem;
            max-width: 80%;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div id="chat-container" class="chat-container w-full rounded-2xl bg-white shadow-2xl border border-gray-100">
        
        <!-- Header -->
        <div class="p-4 bg-teal-600 text-white rounded-t-2xl flex items-center shadow-lg">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.692A9.965 9.965 0 0112 2c4.97 0 9 3.582 9 8z" />
            </svg>
            <h1 class="text-xl font-bold">RuleBot v2.1 (CodSoft AI Task 1)</h1>
        </div>

        <!-- Message Display Area -->
        <div id="message-area" class="message-area flex flex-col space-y-4">
            <!-- Initial Bot Message -->
            <div class="bot-message p-3 shadow-md transition duration-300">
                Welcome! I am a simple rule-based system. Try keywords like *hello, **joke, or **Python*.
            </div>
        </div>

        <!-- Input Area - Now a Form -->
        <form id="chat-form" class="p-4 border-t border-gray-200 bg-white rounded-b-2xl flex">
            <input type="text" id="user-input" placeholder="Ask me something..." 
                   class="flex-grow p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500 transition duration-150"
                   aria-label="User message input">
            <button type="submit" id="send-btn" 
                    class="ml-3 px-6 py-3 bg-teal-600 text-white font-semibold rounded-lg hover:bg-teal-700 transition duration-150 ease-in-out shadow-lg hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-teal-500/50">
                Send
            </button>
        </form>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const messageArea = document.getElementById('message-area');
            const userInput = document.getElementById('user-input');
            const chatForm = document.getElementById('chat-form'); // Reference to the new form element

            // --- Rule Database (omitted for brevity, assume it's the same) ---
            const rules = {
                'hello, hi, hey, greetings': [
                    "Hello! What exciting AI tasks are you working on?",
                    "Hi there! Ready to chat about rules and patterns.",
                    "Greetings! How can I help you test my simple logic?"
                ],
                'good morning, good afternoon, good evening': [
                    "A professional greeting to you! How may I assist your work on the CodSoft tasks?",
                    "Good to hear from you! What is the focus of your AI project right now?"
                ],
                'how are you, status, doing': [
                    "I am a computer program, functioning perfectly! How are you doing today?",
                    "Operating at peak efficiency, thanks for asking! What's your next task?"
                ],
                'python, programming, code': [
                    "Python is the primary language for AI and machine learning! What library are you using?",
                    "Writing code is fun! I hope your project is going well.",
                    "If you are using Python, you might need NumPy or Pandas for data handling."
                ],
                'joke, funny, laugh': [
                    "Why was the computer cold? Because it left its Windows open.",
                    "What do you call a fake noodle? An impasta.",
                    "I told my wife she was drawing her eyebrows too high. She looked surprised."
                ],
                'project, task, internship': [
                    "This rule-based chatbot is Task 1! Great progress. What's the next step?",
                    "Keep up the hard work on your internship tasks. Consistency is key!",
                    "This project teaches you fundamental NLP ideas. Next, check out Minimax!"
                ],
                'help, assistance, guide, advice': [
                    "I can give you simple, rule-based advice! Try asking about 'Task 2' or 'recommendations'.",
                    "Do you need guidance on Minimax or data filtering? Ask away!",
                    "I'm here to offer simple assistance. What topic are you struggling with?"
                ],
                'thank you, thanks, appreciate': [
                    "You're very welcome! Feel free to test my limits anytime.",
                    "No problem at all! Happy coding!",
                    "Glad I could help. Come back with another question!"
                ]
            };
            // --- Core Chat Functions ---

            /**
             * Adds a message to the chat interface.
             */
            function displayMessage(text, sender) {
                const messageDiv = document.createElement('div');
                messageDiv.textContent = text;
                messageDiv.className = p-3 shadow-md text-sm inline-block ${sender}-message;
                
                const wrapper = document.createElement('div');
                wrapper.className = 'flex';
                if (sender === 'user') {
                    wrapper.classList.add('justify-end');
                } else {
                    wrapper.classList.add('justify-start');
                }
                wrapper.appendChild(messageDiv);
                
                messageArea.appendChild(wrapper);

                // Scroll to the bottom
                messageArea.scrollTop = messageArea.scrollHeight;
            }
            
            /**
             * The rule-based logic to determine the chatbot's response.
             */
            function getBotResponse(input) {
                const lowerInput = input.toLowerCase();

                for (const keywords of Object.keys(rules)) {
                    const keywordArray = keywords.split(',').map(k => k.trim()); 
                    
                    for (const keyword of keywordArray) {
                        if (lowerInput.includes(keyword) && keyword.length > 2) {
                            const responses = rules[keywords];
                            const randomIndex = Math.floor(Math.random() * responses.length);
                            return responses[randomIndex];
                        }
                    }
                }

                return "I couldn't match that exact phrase to a rule. Try to keep your input simple, like 'help' or 'good morning'.";
            }

            /**
             * Handles the entire chat exchange cycle.
             */
            function handleChat(event) {
                // Prevent the default form submission behavior (which causes page reload)
                event.preventDefault(); 
                
                const input = userInput.value.trim();
                if (input === "") return;

                // 1. Display user message
                displayMessage(input, 'user');

                // 2. Clear input
                userInput.value = '';
                
                // 3. Generate and display bot response after a short delay
                const response = getBotResponse(input);
                setTimeout(() => {
                    displayMessage(response, 'bot');
                }, 500); 
            }

            // --- Event Listeners ---
            // Use a single submit listener on the form for both button click and Enter key press
            chatForm.addEventListener('submit', handleChat);
        });
    </script>
</body>
</html>